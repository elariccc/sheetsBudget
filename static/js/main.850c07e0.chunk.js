(this.webpackJsonpexcel=this.webpackJsonpexcel||[]).push([[0],Array(32).concat([function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),c=n(0),s=n.n(c),r=n(17),i=n.n(r),u=n(13),l=n(5),o=n.n(l),b=n(10),d=n(2),j=n(3),f=n(6),h=(n(32),["Transactions","Diagrams","Stonks"]);function p(){var e,t=Object(c.useRef)([]),n=Object(c.useState)(null),s=Object(d.a)(n,2),r=s[0],i=s[1],l=Object(c.useState)(null),o=Object(d.a)(l,2),b=o[0],j=o[1],f=Object(c.useState)(null),p=Object(d.a)(f,2),O=p[0],v=p[1];if(Object(c.useEffect)((function(){var e=[];h.forEach((function(n,c){var s=c===b?"white-text":"grey-text text-lighten-1";e.push(Object(a.jsx)(u.b,{ref:function(e){return t.current[c]=e},className:"tab ".concat(s),onClick:function(){v(c<b),j(c)},to:"/".concat(n),children:n},c))})),i(e)}),[b,j,i]),t.current.length&&null!==b){var g=t.current[b],m={left:g.offsetLeft,right:g.offsetParent.offsetWidth-g.offsetLeft-g.offsetWidth},x=O?"indicator--to-left":"indicator--to-right";e=Object(a.jsx)("div",{className:"tab__indicator z-depth-2 ".concat(x),style:m})}return Object(a.jsxs)("div",{className:"tab-container",children:[r,e]})}var O=n(16);n(38);function v(e){var t=e.value,n=e.show,s=Object(c.useState)(new Array(9).fill("\xa0")),r=Object(d.a)(s,2),i=r[0],u=r[1];Object(c.useEffect)((function(){var e=Array.from(String(Number(t).toFixed(2))),n=new Array(9-e.length).fill("\xa0");n.push.apply(n,Object(O.a)(e)),u(n)}),[t]);var l=i.map((function(e,t){return Object(a.jsx)(g,{number:e,thousand:2===t},t)}));return n?Object(a.jsxs)("div",{className:"menu-bar__balance",children:[Object(a.jsx)("p",{className:"balance__label white-text",children:"Balance:"}),l]}):null}function g(e){var t=e.number,n=e.thousand,s=Object(c.useState)("\xa0"),r=Object(d.a)(s,2),i=r[0],u=r[1],l=Object(c.useState)("\xa0"),o=Object(d.a)(l,2),b=o[0],j=o[1],f=Object(c.useState)(!1),h=Object(d.a)(f,2),p=h[0],O=h[1],v="",g="",m="";p&&(v=" number-container--change",g=" number-top--change",m=" number-bottom--change");var x="balance__number-container"+v,S="balance__number"+g,_="balance__number"+m,y="balance__number-mask card green lighten-4"+(n?" mask--thousand":"");return Object(c.useEffect)((function(){t!==i&&(O(!0),j(t),setTimeout((function(){u(t),O(!1)}),995))}),[t,i]),Object(a.jsx)("div",{className:y,children:Object(a.jsxs)("div",{className:x,children:[Object(a.jsx)("p",{className:S,children:i}),Object(a.jsx)("p",{className:_,children:b})]})})}var m=n(19);function x(e){var t=e.color,n=void 0===t?"black":t,s=e.opacity,r=void 0===s?.5:s,u=e.onClick,l=Object(c.useState)(null),o=Object(d.a)(l,2),b=o[0],j=o[1];return Object(c.useEffect)((function(){var e=document.createElement("div");return e.id=Object(m.a)(),document.getElementsByTagName("BODY")[0].appendChild(e),j(e),function(){e.remove()}}),[]),b?i.a.createPortal(Object(a.jsx)("div",{style:{position:"fixed",backgroundColor:n,opacity:r,width:"100%",height:"100%",top:"0",left:"0",zIndex:"1000"},onClick:u}),b):null}function S(e){var t=e.openedState,n=e.children,c=e.className,r=e.renderLayout,i=e.layoutOpacity,u=e.layoutColor;return!t||t.value?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("div",{style:{zIndex:"1001"},className:c,children:n}),r?Object(a.jsx)(x,{onClick:function(){t&&t.set(!1)},opacity:i,color:u}):null]}):null}n(39);function _(e){e.authState;var t=e.googleAuthState,n=e.openedState,c=e.userInfo;return Object(a.jsx)(S,{className:"bar__popup card green lighten-5 fade-in__top-right",openedState:n,renderLayout:!0,layoutOpacity:"0",children:Object(a.jsx)("div",{className:"card-content",children:Object(a.jsxs)("div",{className:"popup__account",children:[Object(a.jsx)("img",{src:c.imageUrl,alt:"User pic",className:"popup__user-image"}),Object(a.jsx)("p",{children:c.name}),Object(a.jsx)("p",{children:c.email}),Object(a.jsx)("button",{onClick:function(){t.value.signOut(),n.set(!1)},className:"btn-small green darken-3 z-depth-0",children:"Log out"}),Object(a.jsx)("button",{onClick:function(){t.value.disconnect(),n.set(!1)},className:"btn-small green darken-3 z-depth-0",children:"Revoke access"})]})})})}n(40);function y(e){var t=e.status,n=Object(c.useState)(""),s=Object(d.a)(n,2),r=s[0],i=s[1],u=Object(c.useState)(!1),l=Object(d.a)(u,2),o=l[0],b=l[1],j=Object(c.useMemo)((function(){return{value:o,set:b}}),[o,b]);return Object(c.useEffect)((function(){var e=setInterval((function(){i((function(e){return 3===e.length?"":e+"."}))}),750);return function(){clearInterval(e)}}),[]),Object(c.useEffect)((function(){b(!!t)}),[t]),Object(a.jsx)(S,{className:"load-bar card green darken-4 white-text",openedState:j,children:Object(a.jsx)("p",{children:t+r})})}var N="16fec496-8586-410a-9133-27a18f3e4771",k="AIzaSyD7EpkVfwnYbLmrpFxtnKX7EzqgXgHZO_Y",w="811477700755-dhv125fsgng4sss3mghpobho9dvtlvb5.apps.googleusercontent.com",I="https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/spreadsheets https://www.googleapis.com/auth/drive",E=["https://sheets.googleapis.com/$discovery/rest?version=v4","https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],A="1Moy3uyOF6KsojUJcX39LNitwSysgmVJAsbG8q0VJsQA";n(41);function D(e){var t=e.authState,n=e.showMessage,r=Object(c.useState)(!1),i=Object(d.a)(r,2),u=i[0],l=i[1],j=Object(c.useState)(null),h=Object(d.a)(j,2),p=h[0],O=h[1],v=Object(c.useState)(null),g=Object(d.a)(v,2),m=g[0],x=g[1],S=Object(c.useMemo)((function(){return{value:m,set:x}}),[m,x]),D=Object(c.useState)(!1),T=Object(d.a)(D,2),C=T[0],M=T[1],U=Object(c.useMemo)((function(){return{value:C,set:M}}),[C,M]);Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.a.client.init({apiKey:k,clientId:w,scope:I,discoveryDocs:E});case 3:l(!0),a=f.a.auth2.getAuthInstance(),x(a),a.isSignedIn.listen((function(){return t.isSignedIn.set(a.isSignedIn.get())})),t.isSignedIn.set(a.isSignedIn.get()),n("Google API client has been initiated"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.error.message);case 14:return e.prev=14,O(null),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[0,11,14,17]])})))).apply(this,arguments)}u||t.isSignedIn.value||(O("Initiating Google API client"),f.a.load("client:auth2",{callback:function(){return e.apply(this,arguments)},timeout:5e3,ontimeout:function(){console.log("Request is timed out"),O(null)}}))}),[u,t.isSignedIn,n]),Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(o.a.mark((function e(){var a,c,s,r,i,u,l,b,d;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O("Fetching list of spreadsheet files from your drive"),e.next=4,f.a.client.drive.files.list({q:"mimeType = 'application/vnd.google-apps.spreadsheet' and trashed = false and not name = 'OriginTemplate'",fields:"nextPageToken, files(id, name)"});case 4:a=e.sent,c=a.result.files.map((function(e){return e.id})),r=0;case 7:if(!(r<c.length)){e.next=26;break}return O("Looking for a budget spreadsheet, ".concat(r+1,"/").concat(c.length)),u=void 0,e.prev=10,e.next=13,f.a.client.sheets.spreadsheets.values.get({spreadsheetId:c[r],range:"'\u0421\u0432\u043e\u0434\u043d\u0430\u044f \u0442\u0430\u0431\u043b\u0438\u0446\u0430'!I20",valueRenderOption:"UNFORMATTED_VALUE",dateTimeRenderOption:"FORMATTED_STRING"});case 13:u=e.sent,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),u=e.t0;case 19:if(((null===(i=u.result)||void 0===i?void 0:i.values)?u.result.values[0][0]:null)!==N){e.next=23;break}return s=c[r],e.abrupt("break",26);case 23:r++,e.next=7;break;case 26:if(s){e.next=41;break}return O("Budget spreadsheet has not been found. Creating a new one"),e.next=30,f.a.client.sheets.spreadsheets.get({spreadsheetId:A,ranges:[],includeGridData:!0});case 30:return l=e.sent,(b=l.result).spreadsheetId=void 0,b.spreadsheetUrl=void 0,b.properties.title="Budget",e.next=37,f.a.client.sheets.spreadsheets.create({},b);case 37:d=e.sent,t.spreadsheetId.set(d.result.spreadsheetId),e.next=42;break;case 41:t.spreadsheetId.set(s);case 42:n("Your budget spreadsheet has been attached"),O(null),e.next=49;break;case 46:e.prev=46,e.t1=e.catch(0),O(null);case 49:case"end":return e.stop()}}),e,null,[[0,46],[10,16]])})))).apply(this,arguments)}t.isSignedIn.value&&!t.spreadsheetId.value&&function(){e.apply(this,arguments)}()}),[t.isSignedIn.value,n,t.spreadsheetId.value,t.spreadsheetId]);var F=t.isSignedIn.value?{name:m.currentUser.get().getBasicProfile().getName(),email:m.currentUser.get().getBasicProfile().getEmail(),imageUrl:m.currentUser.get().getBasicProfile().getImageUrl()}:{},R="btn green darken-3";u||(R+=" disabled");var L=t.isSignedIn.value?Object(a.jsx)("div",{className:"bar__image-container",children:Object(a.jsx)("img",{src:F.imageUrl,alt:"User pic",className:"bar__user-image ".concat(C?"bar__user-image__active":""),onClick:function(){M((function(e){return!e}))}})}):Object(a.jsx)("button",{onClick:function(){u&&m.signIn()},className:R,children:"Log in"});return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)("div",{className:"bar__account-button",children:L}),Object(a.jsx)(_,{authState:t,googleAuthState:S,openedState:U,userInfo:F}),Object(a.jsx)(y,{status:p})]})}n(42);function T(e){var t=e.authState,n=e.balance,c=e.showMessage;return Object(a.jsxs)("nav",{className:"menu-bar green",children:[Object(a.jsx)(p,{}),Object(a.jsx)(v,{value:n,show:t.isSignedIn.value}),Object(a.jsx)(D,{authState:t,showMessage:c})]})}n(43);function C(e){var t=e.message,n=Object(c.useState)([]),s=Object(d.a)(n,2),r=s[0],i=s[1];return Object(c.useEffect)((function(){t&&(i((function(e){var n=Object(O.a)(e);return n.push(Object(a.jsx)(M,{message:t},Object(m.a)())),n})),setTimeout((function(){i((function(e){var t=Object(O.a)(e);return t.shift(),t}))}),4e3))}),[t]),Object(a.jsx)("div",{className:"message-panel",children:r})}function M(e){var t=e.message,n=Object(c.useState)("slide-in__right"),s=Object(d.a)(n,2),r=s[0],i=s[1];Object(c.useEffect)((function(){setTimeout((function(){return i("slide-out__right")}),3710)}),[]);var u="message-element card green lighten-3 ".concat(r);return Object(a.jsx)("div",{className:u,children:Object(a.jsx)("p",{children:t})})}function U(e){return e.map((function(e){return Array.isArray(e)?U(e):e}))}n(44);function F(e){var t=e.id,n=e.label,s=e.inputState,r=e.type,i=e.required,u=Object(c.useState)(!1),l=Object(d.a)(u,2),o=l[0],b=l[1];Object(c.useEffect)((function(){s.value&&b(!0)}),[s.value]);var j="input__label";return o&&(j+=" input__label--active"),Object(a.jsxs)("div",{className:"input",children:[Object(a.jsx)("input",{autoComplete:"off",id:t,type:r,value:s.value,className:"input__field",onChange:function(e){s.set(e.target.value)},onFocus:function(){b(!0)},onBlur:function(){""===s.value&&b(!1)},required:i}),Object(a.jsx)("label",{htmlFor:t,className:j,onMouseDown:function(e){o&&e.preventDefault()},children:n})]})}n(45);function R(e){var t=e.inputState;return Object(a.jsx)("input",{autoComplete:"off",type:"date",value:t.value,className:"date-input",onChange:function(e){t.set(e.target.value)}})}n(46);function L(e){var t=e.inputState,n=e.label;return Object(a.jsx)("div",{className:"switch",children:Object(a.jsxs)("label",{children:[n.left,Object(a.jsx)("input",{type:"checkbox",checked:t.value,onChange:function(e){t.set(e.target.checked)}}),Object(a.jsx)("span",{className:"lever"}),n.right]})})}n(47);function B(e){var t=e.authState,n=e.updateData,r=e.transactionsData,i=Object(j.g)(),u=Object(j.f)(),l=!!r.length,h=Object(c.useState)(null),p=Object(d.a)(h,2),O=p[0],v=p[1],g=Object(c.useState)(null),m=Object(d.a)(g,2),x=m[0],S=m[1],_=Object(c.useState)(0),y=Object(d.a)(_,2),N=y[0],k=y[1];Object(c.useEffect)((function(){if(l)for(var e=r.map((function(e,c){var s,i=function(){var e=Object(b.a)(o.a.mark((function e(){var a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Array(699).fill(new Array(3).fill("")),(s=U(r)).splice(c,1),i={data:[{range:"'\u0411\u044e\u0434\u0436\u0435\u0442'!A3",values:a},{range:"'\u0411\u044e\u0434\u0436\u0435\u0442'!A3",values:s}],valueInputOption:"USER_ENTERED"},e.next=9,f.a.client.sheets.spreadsheets.values.batchUpdate({spreadsheetId:t.spreadsheetId.value,resource:i});case 9:n();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=!1;if(e[2]){var l=e[2].toString().split(" "),d=l.indexOf("\u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430");-1!==d?(l.splice(d,1),s=l.join(" "),u=!0):s=e[2]}return Object(a.jsx)(q,{date:e[0],amount:e[1]?e[1]:"\xa0",purpose:s||"\xa0",earned:u,handleDeleteClick:i},c)})).reverse(),c=Math.ceil(e.length/10),s=[],d=[],h=function(t){var n=t?"/".concat(t+1):"";s.push(Object(a.jsx)(j.a,{exact:!0,path:"".concat(i.url).concat(n),children:e.slice(10*t,10*t+10)},t));var c=t===N?"green white-text":"green darken-3 white-text";d.push(Object(a.jsx)("div",{className:"pages__number card ".concat(c),onClick:function(){u.push("".concat(i.url).concat(n)),k(t)},children:t+1},t)),v(s),S(d)},p=0;p<c;p++)h(p)}),[l,r,t.spreadsheetId.value,n,i.url,u,N,k]);var w=l?"trans__table--active":null;return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)("div",{className:"trans-container card green lighten-5",children:[Object(a.jsx)("h2",{className:"green-text text-darken-4",children:"Transactions"}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"trans__table ".concat(w),children:[Object(a.jsx)(P,{authState:t,updateData:n}),Object(a.jsx)(j.c,{children:O})]})]}),Object(a.jsx)("div",{children:x})]})}function P(e){var t=e.authState,n=e.updateData,s=Object(c.useState)((new Date).toISOString().substr(0,10)),r=Object(d.a)(s,2),i=r[0],u=r[1],l=Object(c.useMemo)((function(){return{value:i,set:u}}),[i,u]),j=Object(c.useState)(""),h=Object(d.a)(j,2),p=h[0],O=h[1],v=Object(c.useMemo)((function(){return{value:p,set:O}}),[p,O]),g=Object(c.useState)(""),m=Object(d.a)(g,2),x=m[0],S=m[1],_=Object(c.useMemo)((function(){return{value:x,set:S}}),[x,S]),y=Object(c.useState)(!1),N=Object(d.a)(y,2),k=N[0],w=N[1],I=Object(c.useMemo)((function(){return{value:k,set:w}}),[k,w]),E=k?"green lighten-4":"grey lighten-3";function A(){return(A=Object(b.a)(o.a.mark((function e(a){var c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),c={values:[[i,p,(k?"\u0437\u0430\u0440\u043f\u043b\u0430\u0442\u0430 ":"")+x]]},e.next=4,f.a.client.sheets.spreadsheets.values.append({spreadsheetId:t.spreadsheetId.value,range:"'\u0411\u044e\u0434\u0436\u0435\u0442'!A3",valueInputOption:"USER_ENTERED",resource:c});case 4:n(),u((new Date).toISOString().substr(0,10)),O(""),S(""),w(!1),a.target.querySelectorAll("input").forEach((function(e){e.focus(),e.blur()}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("form",{className:"trans__row-container",onSubmit:function(e){return A.apply(this,arguments)},children:[Object(a.jsxs)("div",{className:"trans__row ".concat(E),children:[Object(a.jsx)(R,{inputState:l}),Object(a.jsx)(F,{inputState:v,label:"Amount of money",id:"moneyAmount",type:"number",required:!0}),Object(a.jsx)(F,{inputState:_,id:"purpose",type:"text",label:"Purpose"}),Object(a.jsx)(L,{inputState:I,label:{left:"Spent",right:"Earned"}})]}),Object(a.jsx)("button",{className:"material-icons trans__submit green-text text-darken-4",type:"submit",children:"add_circle_outline"})]})}function q(e){var t=e.date,n=e.amount,c=e.purpose,s=e.earned,r=e.handleDeleteClick,i=s?"green lighten-4":"grey lighten-3";return Object(a.jsxs)("div",{className:"trans__row-container",children:[Object(a.jsxs)("div",{className:"trans__row ".concat(i),children:[Object(a.jsx)("span",{children:t}),Object(a.jsx)("span",{className:"row__amount",children:n.toLocaleString("fr-Fr",{minimumFractionDigits:2,maximumFractionDigits:2})}),Object(a.jsx)("span",{children:c}),Object(a.jsx)("span",{children:s?"Earned":"Spent"})]}),Object(a.jsx)("button",{className:"material-icons trans__submit green-text text-darken-4",type:"button",onClick:r,children:"backspace"})]})}n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55);function z(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(null),u=Object(d.a)(i,2),l=u[0],h=u[1],p=Object(c.useMemo)((function(){return{isSignedIn:{value:n,set:r},spreadsheetId:{value:l,set:h}}}),[n,r,l,h]),O=Object(c.useState)(null),v=Object(d.a)(O,2),g=v[0],m=v[1],x=Object(c.useCallback)((function(e){m(null),m(e)}),[m]),S=Object(c.useState)(null),_=Object(d.a)(S,2),N=_[0],k=_[1],w=Object(c.useState)(0),I=Object(d.a)(w,2),E=I[0],A=I[1],D=Object(c.useState)(null),M=Object(d.a)(D,2),U=M[0],F=M[1];Object(c.useEffect)((function(){function e(){return(e=Object(b.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,F("Updating data"),e.next=4,f.a.client.sheets.spreadsheets.values.batchGet({spreadsheetId:l,ranges:["'\u0411\u044e\u0434\u0436\u0435\u0442'!F1","'\u0411\u044e\u0434\u0436\u0435\u0442'!A3:C701"],valueRenderOption:"UNFORMATTED_VALUE",dateTimeRenderOption:"FORMATTED_STRING"});case 4:t=e.sent,n=t.result.valueRanges,k({balance:n[0],transactions:n[1]}),x("Data has been updated"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:return e.prev=13,F(null),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[0,10,13,16]])})))).apply(this,arguments)}n&&l&&function(){e.apply(this,arguments)}()}),[l,E,n,x]);var R=Object(c.useState)(null),L=Object(d.a)(R,2),P=L[0],q=L[1],z=Object(c.useState)([]),G=Object(d.a)(z,2),J=G[0],V=G[1];return Object(c.useEffect)((function(){N&&(q(N.balance.values[0][0]),V(N.transactions.values?N.transactions.values:[]))}),[N]),Object(c.useEffect)((function(){n||(h(null),k(null))}),[n,h,k]),Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(T,{authState:p,balance:P,showMessage:x}),Object(a.jsx)("div",{className:"field-container",children:Object(a.jsx)(j.c,{children:Object(a.jsx)(j.a,{path:"/Transactions",children:Object(a.jsx)(B,{authState:p,updateData:function(){A((function(e){return++e}))},transactionsData:J})})})}),Object(a.jsx)(y,{status:U}),Object(a.jsx)(C,{message:g})]})}n(56);i.a.render(Object(a.jsx)(u.a,{children:Object(a.jsx)(z,{})}),document.getElementById("root"))}]),[[57,1,2]]]);
//# sourceMappingURL=main.850c07e0.chunk.js.map